{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/sgrieve/Documents/GitHub/Habitful/components/Habits.js\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Container from './Container';\nimport Styles from './Styles';\nimport { useState, useEffect } from 'react';\nimport { db, doc, collection, getDocs, updateDoc, arrayUnion, arrayRemove } from '../firebase/index';\nimport { useNavigation } from '@react-navigation/native';\nimport HabitsItem from './HabitsItem';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Habits() {\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    habits = _useState2[0],\n    setHabits = _useState2[1];\n  var _useState3 = useState(),\n    _useState4 = _slicedToArray(_useState3, 2),\n    currentDate = _useState4[0],\n    setCurrentDate = _useState4[1];\n  var navigation = useNavigation();\n  var getHabits = function () {\n    var _ref = _asyncToGenerator(function* () {\n      var querySnapshot = yield getDocs(collection(db, \"habits\"));\n      if (querySnapshot.docs.length > 0) {\n        setHabits(querySnapshot.docs.map(function (doc) {\n          return _objectSpread(_objectSpread({}, doc.data()), {}, {\n            id: doc.id\n          });\n        }));\n      }\n    });\n    return function getHabits() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var addCompletedHabit = function () {\n    var _ref2 = _asyncToGenerator(function* (habitId, isCompleted) {\n      if (!isCompleted) {\n        yield updateDoc(doc(db, \"habits\", habitId), {\n          completed: arrayUnion(currentDate)\n        });\n      } else {\n        yield updateDoc(doc(db, \"habits\", habitId), {\n          completed: arrayRemove(currentDate)\n        });\n      }\n      getHabits();\n    });\n    return function addCompletedHabit(_x, _x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    getHabits();\n    setCurrentDate(new Date().toDateString());\n  }, []);\n  return _jsxDEV(ScrollView, {\n    children: _jsxDEV(Container, {\n      pageTitle: \"H\",\n      children: [_jsxDEV(View, {\n        style: Styles.habits_day,\n        children: [_jsxDEV(Text, {\n          style: Styles.habits_day_title,\n          children: \"Today\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 11\n        }, this), _jsxDEV(Text, {\n          style: Styles.habits_day_title_sub,\n          children: currentDate\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), habits != null && habits.map(function (habit) {\n        if (habit.completed.includes(currentDate)) {\n          return _jsxDEV(HabitsItem, {\n            habitId: habit.id,\n            habitName: habit.name,\n            currentDate: currentDate,\n            isCompleted: true,\n            addCompletedHabit: addCompletedHabit\n          }, habit.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 17\n          }, this);\n        } else {\n          return _jsxDEV(HabitsItem, {\n            habitId: habit.id,\n            habitName: habit.name,\n            currentDate: currentDate,\n            isCompleted: false,\n            addCompletedHabit: addCompletedHabit\n          }, habit.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 17\n          }, this);\n        }\n      }), _jsxDEV(Pressable, {\n        style: Styles.add_habit_btn,\n        onPress: function onPress() {\n          return navigation.navigate('AddHabit');\n        },\n        children: _jsxDEV(Text, {\n          style: Styles.add_habit_txt,\n          children: \"Add H\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n}","map":{"version":3,"names":["Container","Styles","useState","useEffect","db","doc","collection","getDocs","updateDoc","arrayUnion","arrayRemove","useNavigation","HabitsItem","jsxDEV","_jsxDEV","Habits","_useState","_useState2","_slicedToArray","habits","setHabits","_useState3","_useState4","currentDate","setCurrentDate","navigation","getHabits","_ref","_asyncToGenerator","querySnapshot","docs","length","map","_objectSpread","data","id","apply","arguments","addCompletedHabit","_ref2","habitId","isCompleted","completed","_x","_x2","Date","toDateString","ScrollView","children","pageTitle","View","style","habits_day","Text","habits_day_title","fileName","_jsxFileName","lineNumber","columnNumber","habits_day_title_sub","habit","includes","habitName","name","Pressable","add_habit_btn","onPress","navigate","add_habit_txt"],"sources":["/Users/sgrieve/Documents/GitHub/Habitful/components/Habits.js"],"sourcesContent":["import { Text, Pressable, View, ScrollView, Button } from 'react-native';\nimport Container from './Container';\nimport Styles from './Styles';\nimport { useState, useEffect } from 'react';\nimport { db, doc, collection, getDocs, updateDoc, arrayUnion, arrayRemove } from '../firebase/index';\nimport { useNavigation } from '@react-navigation/native';\nimport HabitsItem from './HabitsItem';\n\nexport default function Habits() {\n  const [habits, setHabits] = useState(null)\n  const [currentDate, setCurrentDate] = useState()\n\n  const navigation = useNavigation();\n\n  // GET HABITS FROM DB AND ADD TO STATE\n  const getHabits = async () => {\n    const querySnapshot = await getDocs(collection(db, \"habits\"))\n    // Check if any habits exist before updating state\n    if(querySnapshot.docs.length > 0){\n      setHabits(\n        querySnapshot.docs.map((doc)=>({\n          ...doc.data(),\n          id: doc.id\n        }))\n      )\n    }\n  }\n\n  // ADD COMPLETED HABIT TO STORE, Update STYLING of CHECK MARK and NAME\n  const addCompletedHabit = async(habitId, isCompleted) => {\n    if(!isCompleted){\n      await updateDoc(doc(db, \"habits\", (habitId)), {\n        completed: arrayUnion(currentDate)           \n      })\n    } else {\n      await updateDoc(doc(db, \"habits\", (habitId)), {\n        completed: arrayRemove(currentDate)         \n      })\n    }\n    getHabits()\n  }\n\n  useEffect (() => {\n    getHabits()\n    setCurrentDate(new Date().toDateString())\n  }, [])\n\n  return (\n    <ScrollView>\n      <Container pageTitle='H'>\n        <View style={Styles.habits_day}>\n          <Text style={Styles.habits_day_title}>Today</Text>\n          <Text style={Styles.habits_day_title_sub}>{currentDate}</Text>\n        </View>\n        {habits != null &&\n          habits.map(function(habit) {\n            if(habit.completed.includes(currentDate)){\n              return(\n                <HabitsItem\n                  key={habit.id}\n                  habitId={habit.id}\n                  habitName={habit.name}\n                  currentDate={currentDate}\n                  isCompleted={true}\n                  addCompletedHabit={addCompletedHabit}\n                />)\n            } else {\n              return(\n                <HabitsItem\n                  key={habit.id}\n                  habitId={habit.id}\n                  habitName={habit.name}\n                  currentDate={currentDate}\n                  isCompleted={false}\n                  addCompletedHabit={addCompletedHabit}\n                />\n              )\n            }\n          })\n        }\n        <Pressable style={Styles.add_habit_btn} onPress={() => navigation.navigate('AddHabit')}>\n          <Text style={Styles.add_habit_txt}>Add H</Text>\n        </Pressable>\n        {/* <Button\n          onPress={() => navigation.navigate('AddHabit')}\n          title=\"Add Habit\"\n        /> */}\n      </Container>\n    </ScrollView>\n  )\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}